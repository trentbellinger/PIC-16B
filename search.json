[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "posts/Homework1/HW1.html",
    "href": "posts/Homework1/HW1.html",
    "title": "1. Create a Database",
    "section": "",
    "text": "import pandas as pd\nimport sqlite3\n\n\n1. Create a Database\nBefore we create the database, we load in the three different datasets into Pandas dataframes.\n\ncountries = pd.read_csv(\"https://raw.githubusercontent.com/mysociety/gaze/master/data/fips-10-4-to-iso-country-codes.csv\")\ncountries.head()\n\n\n\n\n\n\n\n\nFIPS 10-4\nISO 3166\nName\n\n\n\n\n0\nAF\nAF\nAfghanistan\n\n\n1\nAX\n-\nAkrotiri\n\n\n2\nAL\nAL\nAlbania\n\n\n3\nAG\nDZ\nAlgeria\n\n\n4\nAQ\nAS\nAmerican Samoa\n\n\n\n\n\n\n\n\nstations = pd.read_csv(\"station-metadata.csv\")\nstations.head()\n\n\n\n\n\n\n\n\nID\nLATITUDE\nLONGITUDE\nSTNELEV\nNAME\n\n\n\n\n0\nACW00011604\n57.7667\n11.8667\n18.0\nSAVE\n\n\n1\nAE000041196\n25.3330\n55.5170\n34.0\nSHARJAH_INTER_AIRP\n\n\n2\nAEM00041184\n25.6170\n55.9330\n31.0\nRAS_AL_KHAIMAH_INTE\n\n\n3\nAEM00041194\n25.2550\n55.3640\n10.4\nDUBAI_INTL\n\n\n4\nAEM00041216\n24.4300\n54.4700\n3.0\nABU_DHABI_BATEEN_AIR\n\n\n\n\n\n\n\nWe have to create a function to prepare the temps dataset into a more suitable form for our database.\n\ntemps_iter = pd.read_csv(\"temps.csv\", chunksize = 100000)\ntemps = temps_iter.__next__()\n\ndef prepare_df(df):\n    df = df.set_index(keys=[\"ID\", \"Year\"])\n    df = df.stack()\n    df = df.reset_index()\n    df = df.rename(columns = {\"level_2\"  : \"Month\" , 0 : \"Temp\"})\n    df[\"Month\"] = df[\"Month\"].str[5:].astype(int)\n    df[\"Temp\"]  = df[\"Temp\"] / 100\n    return(df)\n\ntemps = prepare_df(temps)\n\ntemps.head()\n\n\n\n\n\n\n\n\nID\nYear\nMonth\nTemp\n\n\n\n\n0\nACW00011604\n1961\n1\n-0.89\n\n\n1\nACW00011604\n1961\n2\n2.36\n\n\n2\nACW00011604\n1961\n3\n4.72\n\n\n3\nACW00011604\n1961\n4\n7.73\n\n\n4\nACW00011604\n1961\n5\n11.28\n\n\n\n\n\n\n\nWe now create the database with one table for each of the three datasets that we have.\n\nconn = sqlite3.connect(\"hw1.db\")\n\ncountries.to_sql(\"countries\", conn, if_exists = \"replace\", index = False)\n\nstations.to_sql(\"stations\", conn, if_exists = \"replace\", index = False)\n\nfor i, df in enumerate(temps_iter):\n    df = prepare_df(df)\n    df.to_sql(\"temperatures\", conn, if_exists = \"replace\" if i == 0 else \"append\", index = False)\n    \nconn.close()\n\n\n\n2. Query Function\nThe code below is also contained in a separate file called “climate_database.py”.\n\ndef query_climate_database(db_file, country, year_begin, year_end, month):\n    with sqlite3.connect(db_file) as conn:\n        cmd = \\\n        f\"\"\"\n        SELECT \n            stations.NAME, stations.LATITUDE, stations.LONGITUDE, countries.Name \"Country\", temperatures.Year, temperatures.Month, temperatures.Temp\n        FROM \n            stations\n        INNER JOIN \n            countries ON SUBSTRING(stations.ID, 1, 2) = countries.[FIPS 10-4]\n        JOIN\n            temperatures ON stations.ID = temperatures.ID\n        WHERE \n            countries.Name = \"{country}\"\n            AND\n            temperatures.Year BETWEEN {year_begin} AND {year_end}\n            AND\n            temperatures.Month = {month}\n        \"\"\"\n        df = pd.read_sql_query(cmd, conn)\n    \n    return(df)\n\ntest = query_climate_database(db_file = \"hw1.db\",\n                       country = \"India\", \n                       year_begin = 1980, \n                       year_end = 2020,\n                       month = 1)\ntest\n\n\n\n\n\n\n\n\nNAME\nLATITUDE\nLONGITUDE\nCountry\nYear\nMonth\nTemp\n\n\n\n\n0\nPBO_ANANTAPUR\n14.583\n77.633\nIndia\n1980\n1\n23.48\n\n\n1\nPBO_ANANTAPUR\n14.583\n77.633\nIndia\n1981\n1\n24.57\n\n\n2\nPBO_ANANTAPUR\n14.583\n77.633\nIndia\n1982\n1\n24.19\n\n\n3\nPBO_ANANTAPUR\n14.583\n77.633\nIndia\n1983\n1\n23.51\n\n\n4\nPBO_ANANTAPUR\n14.583\n77.633\nIndia\n1984\n1\n24.81\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n3147\nDARJEELING\n27.050\n88.270\nIndia\n1983\n1\n5.10\n\n\n3148\nDARJEELING\n27.050\n88.270\nIndia\n1986\n1\n6.90\n\n\n3149\nDARJEELING\n27.050\n88.270\nIndia\n1994\n1\n8.10\n\n\n3150\nDARJEELING\n27.050\n88.270\nIndia\n1995\n1\n5.60\n\n\n3151\nDARJEELING\n27.050\n88.270\nIndia\n1997\n1\n5.70\n\n\n\n\n3152 rows × 7 columns\n\n\n\n\n\n3. Geographic Scatter Function\n\nfrom plotly import express as px\nfrom sklearn.linear_model import LinearRegression\n\ndef temperature_coefficient_plot(db_file, country, year_begin, year_end, month, min_obs, **kwargs):\n    \n    df = query_climate_database(db_file, country, year_begin, year_end, month)\n    df = df[df.groupby(\"NAME\")[\"Year\"].transform('nunique') &gt;= min_obs]\n    \n    df2 = df.groupby(\"NAME\")[[\"LATITUDE\", \"LONGITUDE\"]].median()\n    linreg = lambda x: LinearRegression().fit(np.array(x[\"Year\"]).reshape(x[\"Year\"].size, 1), x[\"Temp\"]).coef_[0]\n    df2[\"change_temp\"] = df.groupby(\"NAME\").apply(linreg)\n    \n    plot_title = f\"Estimates of Yearly Increase in Temperature in Month {month} for Stations in {country}, Years {year_begin}-{year_end}\"\n    \n    return(px.scatter_mapbox(lat = df2[\"LATITUDE\"], \n                             lon = df2[\"LONGITUDE\"], \n                             color = round(df2[\"change_temp\"], 4),\n                             color_continuous_midpoint = 0,\n                             hover_name = df2.index, \n                             labels = {\"color\":\"Estimated Yearly Increase (Celcius)\"},\n                             title = plot_title,\n                             **kwargs))\n\n\ncolor_map = px.colors.diverging.RdGy_r # choose a colormap\n\nfig = temperature_coefficient_plot(\"hw1.db\", \"India\", 1980, 2020, 1, \n                                   min_obs = 10,\n                                   zoom = 2,\n                                   mapbox_style=\"carto-positron\",\n                                   color_continuous_scale=color_map)\n\nfig.show()"
  },
  {
    "objectID": "posts/Homework0/HW0.html",
    "href": "posts/Homework0/HW0.html",
    "title": "Homework 0",
    "section": "",
    "text": "In order to figure out what type of visualization to make using the penguins dataset, I first read in the dataset and looked at its columns.\n\n\nimport pandas as pd\nurl = \"https://raw.githubusercontent.com/pic16b-ucla/24W/main/datasets/palmer_penguins.csv\"\npenguins = pd.read_csv(url)\n\n\npenguins.head()\n\n\n\n\n\n\n\n\nstudyName\nSample Number\nSpecies\nRegion\nIsland\nStage\nIndividual ID\nClutch Completion\nDate Egg\nCulmen Length (mm)\nCulmen Depth (mm)\nFlipper Length (mm)\nBody Mass (g)\nSex\nDelta 15 N (o/oo)\nDelta 13 C (o/oo)\nComments\n\n\n\n\n0\nPAL0708\n1\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN1A1\nYes\n11/11/07\n39.1\n18.7\n181.0\n3750.0\nMALE\nNaN\nNaN\nNot enough blood for isotopes.\n\n\n1\nPAL0708\n2\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN1A2\nYes\n11/11/07\n39.5\n17.4\n186.0\n3800.0\nFEMALE\n8.94956\n-24.69454\nNaN\n\n\n2\nPAL0708\n3\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN2A1\nYes\n11/16/07\n40.3\n18.0\n195.0\n3250.0\nFEMALE\n8.36821\n-25.33302\nNaN\n\n\n3\nPAL0708\n4\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN2A2\nYes\n11/16/07\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nAdult not sampled.\n\n\n4\nPAL0708\n5\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN3A1\nYes\n11/16/07\n36.7\n19.3\n193.0\n3450.0\nFEMALE\n8.76651\n-25.32426\nNaN\n\n\n\n\n\n\n\n\nThe dataset has columns studyName, Sample Number, Species, Region, Island, Stage, Individual ID, Clutch Completion, Date Egg, Culmen Length, Culmen Depth, Flipper Length, Body Mass, Sea, Delta 15 N, Delta 13 C, and Comments.\nI am particularly interested in looking at the Body Mass column because this can be indicative of the overall health and strength of the penguins.\nI want to visualize how the body mass of a penguin depends on the sex of the penguin and the island that the penguin lives on.\n\n\n\n\n\nWe start by grouping the observations in the dataset by island and sex and finding the median body mass of penguins for each category combination. This simple process is outlined below.\n\n\npenguins_by_island = penguins.groupby([\"Island\", \"Sex\"])[\"Body Mass (g)\"].median()\npenguins_by_island\n\nIsland     Sex   \nBiscoe     .         4875.0\n           FEMALE    4587.5\n           MALE      5350.0\nDream      FEMALE    3450.0\n           MALE      3950.0\nTorgersen  FEMALE    3400.0\n           MALE      4000.0\nName: Body Mass (g), dtype: float64\n\n\n\nAt first glance, it appears that male penguins at each island have higher mass that females on each island.\nIt also seems like the penguins on Biscoe Island have much higher mass than the other two islands.\nWe will see visualize these observations.\n\n\n\n\n\nWe now have three variables that we want to visualize: median body mass, island, and sex.\nBody mass is a numeric variable, whereas island and sex are categorical variables.\nThis combination led me to create a double bar graph to display the trends among these three variables.\nThe code for this bar graph is below. I imported the necessary packages, created the bars for the bar graph, and added labels.\n\n\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# We will create a bar plot that groups by Island and Sex and shows the median \n# body mass of the penguins.\n\n# We plot the bars for the median body mass of female penguins by island, as \n# calculated above.\nplt.bar(X_axis - 0.2, [4587.5, 3450, 3400], 0.4, label = 'Female') \n# We plot the bars for the median body mass of male penguins by island, as \n# calculated above.\nplt.bar(X_axis + 0.2, [5350, 3950, 4000], 0.4, label = 'Male') \n  \nplt.xticks([0,1,2], [\"Biscoe\", \"Dream\", \"Torgersen\"]) \nplt.xlabel(\"Island\") \nplt.ylabel(\"Median Body Mass of Penguins\") \nplt.title(\"Body Mass of Penguins by Island and Sex\") \nplt.legend() \nplt.show() \n\n\n\n\n\n\n\n\n\nAs we can see from the visualization, Biscoe island has penguins with higher body mass than Dream island and Torgersen island. Also, male penguins on average have a greater body mass that female penguins on each island."
  },
  {
    "objectID": "posts/Homework0/HW0.html#loading-in-and-viewing-the-data",
    "href": "posts/Homework0/HW0.html#loading-in-and-viewing-the-data",
    "title": "Homework 0",
    "section": "",
    "text": "In order to figure out what type of visualization to make using the penguins dataset, I first read in the dataset and looked at its columns.\n\n\nimport pandas as pd\nurl = \"https://raw.githubusercontent.com/pic16b-ucla/24W/main/datasets/palmer_penguins.csv\"\npenguins = pd.read_csv(url)\n\n\npenguins.head()\n\n\n\n\n\n\n\n\nstudyName\nSample Number\nSpecies\nRegion\nIsland\nStage\nIndividual ID\nClutch Completion\nDate Egg\nCulmen Length (mm)\nCulmen Depth (mm)\nFlipper Length (mm)\nBody Mass (g)\nSex\nDelta 15 N (o/oo)\nDelta 13 C (o/oo)\nComments\n\n\n\n\n0\nPAL0708\n1\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN1A1\nYes\n11/11/07\n39.1\n18.7\n181.0\n3750.0\nMALE\nNaN\nNaN\nNot enough blood for isotopes.\n\n\n1\nPAL0708\n2\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN1A2\nYes\n11/11/07\n39.5\n17.4\n186.0\n3800.0\nFEMALE\n8.94956\n-24.69454\nNaN\n\n\n2\nPAL0708\n3\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN2A1\nYes\n11/16/07\n40.3\n18.0\n195.0\n3250.0\nFEMALE\n8.36821\n-25.33302\nNaN\n\n\n3\nPAL0708\n4\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN2A2\nYes\n11/16/07\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nAdult not sampled.\n\n\n4\nPAL0708\n5\nAdelie Penguin (Pygoscelis adeliae)\nAnvers\nTorgersen\nAdult, 1 Egg Stage\nN3A1\nYes\n11/16/07\n36.7\n19.3\n193.0\n3450.0\nFEMALE\n8.76651\n-25.32426\nNaN\n\n\n\n\n\n\n\n\nThe dataset has columns studyName, Sample Number, Species, Region, Island, Stage, Individual ID, Clutch Completion, Date Egg, Culmen Length, Culmen Depth, Flipper Length, Body Mass, Sea, Delta 15 N, Delta 13 C, and Comments.\nI am particularly interested in looking at the Body Mass column because this can be indicative of the overall health and strength of the penguins.\nI want to visualize how the body mass of a penguin depends on the sex of the penguin and the island that the penguin lives on."
  },
  {
    "objectID": "posts/Homework0/HW0.html#data-preparation",
    "href": "posts/Homework0/HW0.html#data-preparation",
    "title": "Homework 0",
    "section": "",
    "text": "We start by grouping the observations in the dataset by island and sex and finding the median body mass of penguins for each category combination. This simple process is outlined below.\n\n\npenguins_by_island = penguins.groupby([\"Island\", \"Sex\"])[\"Body Mass (g)\"].median()\npenguins_by_island\n\nIsland     Sex   \nBiscoe     .         4875.0\n           FEMALE    4587.5\n           MALE      5350.0\nDream      FEMALE    3450.0\n           MALE      3950.0\nTorgersen  FEMALE    3400.0\n           MALE      4000.0\nName: Body Mass (g), dtype: float64\n\n\n\nAt first glance, it appears that male penguins at each island have higher mass that females on each island.\nIt also seems like the penguins on Biscoe Island have much higher mass than the other two islands.\nWe will see visualize these observations."
  },
  {
    "objectID": "posts/Homework0/HW0.html#data-visualization",
    "href": "posts/Homework0/HW0.html#data-visualization",
    "title": "Homework 0",
    "section": "",
    "text": "We now have three variables that we want to visualize: median body mass, island, and sex.\nBody mass is a numeric variable, whereas island and sex are categorical variables.\nThis combination led me to create a double bar graph to display the trends among these three variables.\nThe code for this bar graph is below. I imported the necessary packages, created the bars for the bar graph, and added labels.\n\n\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# We will create a bar plot that groups by Island and Sex and shows the median \n# body mass of the penguins.\n\n# We plot the bars for the median body mass of female penguins by island, as \n# calculated above.\nplt.bar(X_axis - 0.2, [4587.5, 3450, 3400], 0.4, label = 'Female') \n# We plot the bars for the median body mass of male penguins by island, as \n# calculated above.\nplt.bar(X_axis + 0.2, [5350, 3950, 4000], 0.4, label = 'Male') \n  \nplt.xticks([0,1,2], [\"Biscoe\", \"Dream\", \"Torgersen\"]) \nplt.xlabel(\"Island\") \nplt.ylabel(\"Median Body Mass of Penguins\") \nplt.title(\"Body Mass of Penguins by Island and Sex\") \nplt.legend() \nplt.show() \n\n\n\n\n\n\n\n\n\nAs we can see from the visualization, Biscoe island has penguins with higher body mass than Dream island and Torgersen island. Also, male penguins on average have a greater body mass that female penguins on each island."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "PIC 16B Website - Trent Bellinger",
    "section": "",
    "text": "1. Create a Database\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHomework 0\n\n\n\n\n\n\nweek 0\n\n\nexample\n\n\n\n\n\n\n\n\n\nJan 13, 2024\n\n\nTrent Bellinger\n\n\n\n\n\n\nNo matching items"
  }
]